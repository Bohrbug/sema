<!DOCTYPE html>
<html>
<head>
	<title>eppEditor</title>
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<meta http-equiv="Content-Type" content="text/html;charset=utf-8" >
	<link rel="stylesheet" type="text/css" href="tree.css" />
</head>
<body>

<h2>Epp Editor</h2>
<div id="container" style="overflow:hidden">
	<div id="editor1" style="float:left;width:400px;height:600px;border:1px solid grey"></div>
	<div id="tree-container" style="float:left;width:400px;height:600px;border:1px solid grey"></div>
	<div id="editor2" style="float:right;width:400px;height:600px;border:1px solid grey"></div>
</div>
<div id="status"></div>
<!-- OR ANY OTHER AMD LOADER HERE INSTEAD OF loader.js -->
<script src="../node_modules/monaco-editor/min/vs/loader.js"></script>
<script src="http://code.jquery.com/jquery-1.10.2.min.js"></script>
<script src="http://d3js.org/d3.v3.min.js"></script>
<script src="dndTree.js"></script>
<script>


	require.config({
		paths: {
			'vs': '../node_modules/monaco-editor/min/vs',
			'monaco-vim': '../node_modules/monaco-vim/dist/monaco-vim',
		}
	});

	require(['vs/editor/editor.main', 'monaco-vim'], function(a, MonacoVim) {
		var editor1 = monaco.editor.create(document.getElementById('editor1'), {
			value: [
				'function x() {',
				'\tconsole.log("Language editor!");',
				'}'
			].join('\n'),
			language: 'javascript',
			lineNumbers: "on",
			roundedSelection: false,
			scrollBeyondLastLine: false,
			readOnly: false,
			theme: "vs-dark",
		});
		var editor2 = monaco.editor.create(document.getElementById('editor2'), {
			value: [
				'\tconsole.log("MaxiLib Output");'
			].join('\n'),
			language: 'javascript'
		});


		var myCondition1 = editor1.createContextKey(/*key name*/'myCondition1', /*default value*/false);
		var myCondition2 = editor1.createContextKey(/*key name*/'myCondition2', /*default value*/false);

		editor1.addCommand(monaco.KeyMod.Shift | monaco.KeyCode.Enter, function() {
		    // services available in `ctx`
		    alert('my command is executing!');

		}, 'myCondition1 && myCondition2')

		myCondition1.set(true);

		setTimeout(function() {
    	alert('now enabling also myCondition2, try pressing Tab!');
    	myCondition2.set(true);
    // you can use myCondition2.reset() to go back to the default
		}, 2000);

		var statusNode = document.getElementById('status');
		var vimMode = MonacoVim.initVimMode(editor1, statusNode);
		// remove vim mode by calling
		// vimMode.dispose();

	});
</script>
</body>
</html>
